@model DeltaQrCode.ViewModels.HotelListViewModel

@{
    ViewBag.Title = "HotelAnvelope";
}
<head>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <link href="~/css/SchedulerIndexStyle.css" rel="stylesheet" />
    <script type="text/javascript" src="https://cdn.rawgit.com/asvd/dragscroll/master/dragscroll.js"></script>
</head>

<div id="HeaderAlert" class="alert" role="alert">
</div>

<div class="container text-center">
    <div class="input-group rounded">
        <input type="text" id="search" class="form-control rounded" placeholder="Search" aria-label="Search"
               aria-describedby="search-addon" />
        <span class=" button input-group-text border-0" id="search-addon">
            <i class="fas fa-search"></i>
        </span>
        <div style="margin-left:50px;" type="button" id="AddSetAnv" class="btn btn-success">Adauga anvelope</div>
    </div>
    <br />
</div>
<div id="tableResult" class="container">
    <partial name="_HotelList" model="@Model" />
</div>

<div id="myHotelModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div id="partialInfo"></div>
        </div>
    </div>
</div>

<div id="myHotelDeleteModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myDeleteModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div id="partialInfo"></div>
        </div>
    </div>
</div>

<div id="GetModalCode"></div>

@section Scripts{

    <script type="text/javascript">
        $(function () {
            $("#search-addon").on("click", function () {
                var data = { searchString: $("#search").val(), page: 1 };
                $("#tableResult").load("/Hotel/Search", data);
            });
        });

        $(function () {
            $(".CustomPagination").on("click", function () {
                var page = $(this).attr("data-value");
                var searchString = $("#search").val();
                var data = {
                    searchString: searchString,
                    page: page
                };
                $("#tableResult").load("/Hotel/Search", data);
            });
        });
        var setAnvNewAddModalDialog = function () {
            var url = "/Hotel/AddModalNew"; // the url to the controller
            $.get(url,
                function (data) {
                    $('#partialInfo').html(data);
                    $('#myHotelModal').modal('show');
                });
        };

        var setAnvEditModalDialog = function (id, actionType) {

            var url = "/Hotel/EditModal"; // the url to the controller
            $.get(url + '?id=' + id + '&actionType=' + actionType,
                function (data) {
                    $('#partialInfo').html(data);
                    $('#myHotelModal').modal('show');
                });
        };
        var deleteSetAnvModalDialog = function (id) {

            var url = "/Hotel/DeleteModal"; // the url to the controller
            $.get(url + '?id=' + id,
                function (data) {
                    $('#partialInfo').html(data);
                    $('#myHotelModal').modal('show');
                });
        };

        $('#AddSetAnv').on('click',
            function (event) {
                // dont allow the event to propagate
                event.stopPropagation();
                setAnvNewAddModalDialog();
            });

        $('.actionButton').on('click',
            function (event) {
                // dont allow the event to propagate
                event.stopPropagation();
                var id = $(this).attr("data-value");
                var actionType = $(this).attr("data-actionType");

                setAnvEditModalDialog(id, actionType);
            });

        $('.deleteButton').on('click',
            function (event) {
                // dont allow the event to propagate
                event.stopPropagation();
                var id = $(this).attr("data-value");
                deleteSetAnvModalDialog(id);
            });
    </script>


}
